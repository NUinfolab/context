var core=require("kango/core"),utils=require("kango/utils"),func=utils.func,object=utils.object,browser=require("kango/browser");function MessageRouter(){MessageRouterBase.call(this);safari.application.addEventListener("message",func.bind(this._onMessage,this),!1)}
MessageRouter.prototype=object.extend(MessageRouterBase,{_onMessage:function(a){if(a.target instanceof SafariBrowserTab){var b={name:a.name,data:a.message,origin:"tab",target:browser.getKangoTab(a.target),source:{dispatchMessage:function(b,c){a.target.page.dispatchMessage(b,c);return!0}}};this.fireMessageEvent("message",b)}}});module.exports=new MessageRouter;
