var extensionInfo=require("kango/extension_info"),utils=require("kango/utils"),object=utils.object,func=utils.func,io=require("kango/io");function BrowserButton(a){BrowserButtonBase.call(this,a);this._popupDetails=null;chrome.browserAction.onClicked.addListener(func.bind(this._onClicked,this));this._initDetails(a)}
BrowserButton.prototype=object.extend(BrowserButtonBase,{_onClicked:function(){return this.fireEvent(this.event.COMMAND)},_initDetails:function(a){object.isObject(a)&&(object.isString(a.icon)&&this.setIcon(a.icon),object.isString(a.caption)&&this.setCaption(a.caption),object.isString(a.tooltipText)&&this.setTooltipText(a.tooltipText),object.isObject(a.popup)&&this.setPopup(a.popup))},setTooltipText:function(a){chrome.browserAction.setTitle({title:a.toString()})},setCaption:function(a){},setIcon:function(a){chrome.browserAction.setIcon({path:io.getFileUrl(a)})},
setBadgeValue:function(a){chrome.browserAction.setBadgeText({text:null!=a&&0!=a?a.toString():""})},setBadgeBackgroundColor:function(a){chrome.browserAction.setBadgeBackgroundColor({color:a})},setPopup:function(a){this._popupDetails=a;var b="";a&&a.url&&(b=a.url);chrome.browserAction.setPopup({popup:b})},getPopupDetails:function(){return this._popupDetails},setContextMenu:function(){}});
extensionInfo.browser_button&&(module.exports=new BrowserButton(extensionInfo.browser_button),module.exports.getPublicApi=getPublicApi);
